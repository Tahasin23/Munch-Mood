<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Restaurant Request</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='admin_dashboard.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='resturant.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        .request-forms-container {
            display: flex;
            gap: 32px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
        }
        .request-form-box {
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 2px 10px rgba(234, 149, 149, 0.10);
            padding: 28px 24px;
            min-width: 320px;
            max-width: 370px;
            flex: 1 1 320px;
        }
        .upload-label {
            display: inline-block;
            background: linear-gradient(90deg, #ee1c0d 0%, #ea9595 100%);
            color: #fff;
            padding: 8px 22px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            margin-bottom: 8px;
            transition: background 0.2s, transform 0.2s;
            box-shadow: 0 2px 8px rgba(234, 149, 149, 0.10);
            border: none;
            text-align: center;
        }
        .upload-label:hover {
            background: linear-gradient(90deg, #621616 0%, #ea9595 100%);
            transform: translateY(-2px) scale(1.03);
        }
    </style>
</head>
<body>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flashes" style="list-style:none;padding:0;">
          {% for message in messages %}
            <li style="background:#fffbe6;color:#ee1c0d;padding:10px 20px;margin-bottom:10px;border-radius:8px;font-weight:bold;text-align:center;">
              {{ message }}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <a href="{{ url_for('home') }}" style="position: absolute; top: 24px; right: 36px; z-index: 10;">
        <button type="button" style="background:#fffbe6;color:#ee1c0d;font-weight:bold;border-radius:8px;border:none;padding:10px 24px;cursor:pointer;">
            Back to Home
        </button>
    </a>
    <div class="admin-login-container">
        <div class="request-forms-container">
            <!-- Restaurant Info Request Form -->
            <div class="request-form-box">
                <h2>Add Your Restaurant</h2>
                <form id="restaurant-form" enctype="multipart/form-data">
                    <label>Restaurant Name:</label>
                    <input type="text" name="restaurant_name" required>
                    <label for="restaurant-image-upload" class="upload-label">
                        <i class="fa fa-plus-circle"></i> Upload Restaurant Image
                    </label>
                    <input id="restaurant-image-upload" type="file" name="restaurant_image" accept="image/*" required onchange="previewRestaurantImage(event)" style="display:none;">
                    <img id="restaurant-image-preview" src="#" alt="Image Preview" style="display:none;max-width:180px;margin-top:10px;border-radius:8px;" />
                    <button type="submit" style="margin-top:16px;">Submit Restaurant</button>
                </form>
                <div id="restaurant-success" style="display:none;color:green;font-weight:bold;margin-top:10px;">Your info submitted!</div>
            </div>
            <!-- Food Request Form -->
            <div class="request-form-box">
                <h2>Restaurant Food Approval Request</h2>
                <form method="POST" action="{{ url_for('food_add') }}" enctype="multipart/form-data">
                    <label>Restaurant Name:</label>
                    <input type="text" name="restaurant_name" required>
                    <label>Owner Name:</label>
                    <input type="text" name="owner_name" required>
                    <label>Food Name:</label>
                    <input type="text" name="food_name" required>
                    <label for="food-image-upload" class="upload-label">
                        <i class="fa fa-plus-circle"></i> Upload Food Image
                    </label>
                    <input id="food-image-upload" type="file" name="image" accept="image/*" required onchange="previewImage(event)" style="display:none;">
                    <img id="image-preview" src="#" alt="Image Preview" style="display:none;max-width:180px;margin-top:10px;border-radius:8px;" />
                    <div class="form-group">
                        <label>Category:</label>
                        <select name="category" required>
                            <option value="asian">Asian</option>
                            <option value="Bangladeshi">Bangladeshi</option>
                            <option value="biryani">Biryani</option>
                            <option value="pizza">Pizza</option>
                            <option value="burger">Burger</option>
                            <option value="chicken">Chicken</option>
                        </select>
                    </div>
                    <label>Price (Tk):</label>
                    <input type="number" name="price" required>
                    <button type="submit">Submit Food Request</button>
                </form>
            </div>
        </div>
    </div>
    <script>
    function previewRestaurantImage(event) {
        const input = event.target;
        const preview = document.getElementById('restaurant-image-preview');
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            }
            reader.readAsDataURL(input.files[0]);
        } else {
            preview.src = '#';
            preview.style.display = 'none';
        }
    }
    function previewImage(event) {
        const input = event.target;
        const preview = document.getElementById('image-preview');
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                preview.src = e.target.result;
                preview.style.display = 'block';
            }
            reader.readAsDataURL(input.files[0]);
        } else {
            preview.src = '#';
            preview.style.display = 'none';
        }
    }
    // Make clicking the label open the file input
    document.querySelectorAll('.upload-label').forEach(function(label) {
        label.addEventListener('click', function(e) {
            var inputId = label.getAttribute('for');
            if (inputId) document.getElementById(inputId).click();
        });
    });
    document.getElementById('restaurant-form').addEventListener('submit', function(e) {
        e.preventDefault();
        var form = e.target;
        var data = new FormData(form);
        fetch("{{ url_for('restaurant_add') }}", {
            method: "POST",
            body: data
        }).then(response => {
            if (response.ok) {
                document.getElementById('restaurant-success').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('restaurant-success').style.display = 'none';
                    form.reset();
                    document.getElementById('restaurant-image-preview').style.display = 'none';
                }, 1000);
            }
        });
    });
    </script>
</body>
</html>